{% extends "base.html" %}

{% block content %}

<style>
    /* --- CONFIGURAÇÃO DA FOLHA (Igual ao Editor) --- */
    .roteiro-view {
        font-family: 'Courier Prime', 'Courier New', Courier, monospace;
        font-size: 12pt;
        line-height: 1.0; /* Espaçamento simples de roteiro */
        color: #e0e0e0;   /* Texto claro para fundo escuro */
        
        /* Centraliza a folha na tela */
        width: 100%;
        max-width: 850px; 
        margin: 0 auto;
        padding: 40px;
        background-color: #1e1e1e; /* Fundo cinza chumbo */
        border: 1px solid #333;
        box-shadow: 0 0 20px rgba(0,0,0,0.5);
    }

    /* --- AS CLASSES MÁGICAS (Sincronizadas com o Editor) --- */
    
    /* CENA: Negrito, caixa alta, cinza claro */
    .roteiro-view .cena { 
        font-weight: bold; 
        text-transform: uppercase; 
        margin-top: 2em; 
        margin-bottom: 1em; 
        display: block; 
        width: 100%;
        background-color: #333; /* Destaque sutil no fundo da cena */
        padding: 5px;
        color: #fff;
    }

    /* AÇÃO: Texto corrido normal à esquerda */
    .roteiro-view .acao { 
        text-align: left; 
        margin-bottom: 1em; 
        display: block; 
        width: 100%; 
    }

    /* PERSONAGEM: Recuo de 40% (Meio da tela) */
    .roteiro-view .personagem { 
        margin-left: 40%; 
        width: 30%;       
        font-weight: bold; 
        text-transform: uppercase; 
        margin-top: 1em; 
        margin-bottom: 0; 
        display: block; 
        color: #fff; /* Nome do personagem brilha mais */
    }

    /* FALA: Recuo de 25% e Largura de 50% (Coluna central) */
    .roteiro-view .fala { 
        margin-left: 25%; 
        width: 50%; 
        margin-bottom: 0; 
        display: block; 
    }

    /* PARÊNTESES: (sussurrando) */
    .roteiro-view .parentese { 
        margin-left: 32%; 
        width: 36%;
        font-style: italic; 
        margin-bottom: 0; 
        display: block; 
        color: #aaa;
    }

    /* TRANSIÇÃO: Direita */
    .roteiro-view .transicao { 
        text-align: right; 
        margin-top: 1em; 
        text-transform: uppercase; 
        display: block; 
        color: #fff;
    }

    /* --- MODO DE IMPRESSÃO (PDF) - Fica preto no branco --- */
    @media print {
        .no-print, nav, footer, .btn, .site-footer { display: none !important; }

        body { background-color: white !important; margin: 0; }
        
        .roteiro-view {
            background-color: white !important;
            color: black !important;
            border: none !important;
            box-shadow: none !important;
            padding: 0 !important;
            max-width: 100% !important;
        }

        .roteiro-view * { color: black !important; background-color: transparent !important; }
        
        /* Ajuste fino para impressão A4 */
        .roteiro-view .cena { background: none; border-bottom: 1px solid #000; padding: 0; }
    }
</style>

    <h2>{{ roteiro[1] }}</h2>

{% if roteiro[4] %}
    
    <div style="max-width: 1000px; margin: 0 auto; height: 85vh; background: #1e1e1e; border-radius: 10px; padding: 10px;">
        <iframe src="{{ url_for('static', filename='pdfs/' + roteiro[4]) }}" 
                width="100%" 
                height="100%" 
                style="border: none; border-radius: 8px;">
        </iframe>
    </div>

{% else %}

    <div class="roteiro-view">
        {{ roteiro[2] | safe }}
    </div>

{% endif %}
<br>

<div class="container no-print" style="margin-top: 20px; text-align: center;">
    <a href="{{ url_for('index') }}" class="btn" style="margin-right: 10px;">Voltar para Home</a>
    
    {% if roteiro[4] %}
        <a href="{{ url_for('static', filename='pdfs/' + roteiro[4]) }}" download class="btn btn-primary" >
            ⬇️ Baixar PDF Original
        </a>
    {% else %}
        <button onclick="window.print()" class="btn btn-primary" style=" color: black; font-weight: bold;">
            ⬇️ Imprimir/Salvar
        </button>
    {% endif %}
</div>
{% endblock %}